<!DOCTYPE html>
<html lang="es">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Tracker de Pel√≠culas</title>
   <style>
       body {
           font-family: Arial, sans-serif;
           background-color: #121212;
           color: #fff;
           text-align: center;
           margin: 0;
           padding: 0;
       }

       .container {
           display: none;
           padding: 20px;
       }

       .floating-buttons {
           position: fixed;
           bottom: 20px;
           right: 20px;
           display: flex;
           flex-direction: column;
       }

       .floating-buttons button {
           background-color: #f39c12;
           color: #fff;
           border: none;
           padding: 15px;
           margin: 5px;
           border-radius: 10px;
           cursor: pointer;
       }

       .movie-list, .watch-list {
           list-style: none;
           padding: 0;
       }

       .movie-card {
           background: #0055a5;
           border-radius: 8px;
           padding: 10px;
           text-align: center;
           color: white;
           margin: 10px auto;
           max-width: 300px;
       }

       .stars-container {
           margin: 10px 0;
       }

       .star {
           cursor: pointer;
           font-size: 25px;
           color: gold;
       }

       .star.active {
           color: orange;
       }
   </style>
</head>
<body>

   <div id="inicio" class="container">
       <h1>Bienvenido a Tracker de Pel√≠culas</h1>
       <p>Selecciona una opci√≥n:</p>
   </div>

   <div id="agregar" class="container">
       <h2>Agregar Pel√≠cula</h2>
       <input type="text" id="movieTitleAgregar" placeholder="Nombre de la pel√≠cula">
       <div class="stars-container" id="starRating"></div> <!-- Estrellas interactivas -->
       <button onclick="addMovie()">Agregar</button>
       <h3>Pel√≠culas por ver:</h3>
       <ul id="watchList" class="watch-list"></ul>
   </div>

   <div id="vistas" class="container">
       <h2>Pel√≠culas Vistas</h2>
       <h3>Lista de pel√≠culas vistas:</h3>
       <ul id="movieList" class="movie-list"></ul>
   </div>

   <div class="floating-buttons">
       <button onclick="navigateTo('agregar')">Agregar Pel√≠cula</button>
       <button onclick="navigateTo('vistas')">Pel√≠culas Vistas</button>
   </div>

   <script>
       document.addEventListener("DOMContentLoaded", function () {
           checkRoute();
           generateStarRating();
           loadMovies();
       });

       function navigateTo(section) {
           window.location.hash = section;
       }

       function checkRoute() {
           const hash = window.location.hash.substring(1);
           document.querySelectorAll('.container').forEach(div => div.style.display = 'none');
           if (hash === 'agregar') {
               document.getElementById('agregar').style.display = 'block';
           } else if (hash === 'vistas') {
               document.getElementById('vistas').style.display = 'block';
           } else {
               document.getElementById('inicio').style.display = 'block';
           }
       }

       function generateStarRating() {
           const starContainer = document.getElementById("starRating");
           starContainer.innerHTML = "";
           for (let i = 1; i <= 5; i++) {
               let star = document.createElement("span");
               star.classList.add("star");
               star.innerHTML = "‚òÖ";
               star.dataset.value = i;
               star.onclick = function () { selectStars(starContainer, i); };
               starContainer.appendChild(star);
           }
       }

       function selectStars(container, value) {
           let stars = container.querySelectorAll(".star");
           stars.forEach(star => {
               if (star.dataset.value <= value) {
                   star.classList.add("active");
               } else {
                   star.classList.remove("active");
               }
           });
       }

       function addMovie() {
           const title = document.getElementById('movieTitleAgregar').value;
           const starRating = document.querySelectorAll('#starRating .star.active').length;
           const date = new Date().toLocaleDateString();

           if (!title || starRating === 0) {
               alert("Debes ingresar un t√≠tulo y seleccionar una calificaci√≥n.");
               return;
           }

           const list = document.getElementById('movieList');
           const item = document.createElement('li');

           item.innerHTML = `
               <div class="movie-card">
                   <input type="text" value="${title}" class="edit-title" disabled>
                   <div class="stars-container">${generateStars(starRating)}</div>
                   <p>üìÖ ${date}</p>
                   <button onclick="editMovie(this)">Editar</button>
                   <button onclick="deleteMovie(this)">Eliminar</button>
               </div>
           `;

           list.appendChild(item);
           saveMovies();
       }

       function generateStars(starRating) {
           let starsHtml = "";
           for (let i = 1; i <= 5; i++) {
               starsHtml += `<span class="star ${i <= starRating ? 'active' : ''}" data-value="${i}" onclick="editStars(this)">${i <= starRating ? '‚òÖ' : '‚òÜ'}</span>`;
           }
           return starsHtml;
       }

       function editStars(star) {
           let container = star.parentElement;
           let value = star.dataset.value;
           selectStars(container, value);
           saveMovies();
       }

       function editMovie(button) {
           const card = button.parentElement;
           const input = card.querySelector('.edit-title');
           if (button.textContent === 'Editar') {
               input.disabled = false;
               button.textContent = 'Guardar';
           } else {
               input.disabled = true;
               button.textContent = 'Editar';
               saveMovies();
           }
       }

       function deleteMovie(button) {
           button.parentElement.remove();
           saveMovies();
       }

       function saveMovies() {
           let movies = [];
           document.querySelectorAll('.movie-card').forEach(card => {
               movies.push({
                   title: card.querySelector('.edit-title').value,
                   stars: card.querySelectorAll('.star.active').length,
                   date: card.querySelector('p').textContent.replace('üìÖ ', '')
               });
           });
           localStorage.setItem('movies', JSON.stringify(movies));
       }

       function loadMovies() {
           let movies = JSON.parse(localStorage.getItem('movies')) || [];
           const list = document.getElementById('movieList');
           list.innerHTML = "";
           movies.forEach(movie => {
               const item = document.createElement('li');
               item.innerHTML = `
                   <div class="movie-card">
                       <input type="text" value="${movie.title}" class="edit-title" disabled>
                       <div class="stars-container">${generateStars(movie.stars)}</div>
                       <p>üìÖ ${movie.date}</p>
                       <button onclick="editMovie(this)">Editar</button>
                       <button onclick="deleteMovie(this)">Eliminar</button>
                   </div>
               `;
               list.appendChild(item);
           });
       }

       window.addEventListener('hashchange', checkRoute);
   </script>

</body>
</html>